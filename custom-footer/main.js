/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var h=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var v=(n,t)=>{for(var i in t)h(n,i,{get:t[i],enumerable:!0})},E=(n,t,i,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let e of f(t))!y.call(n,e)&&e!==i&&h(n,e,{get:()=>t[e],enumerable:!(s=m(t,e))||s.enumerable});return n};var b=n=>E(h({},"__esModule",{value:!0}),n);var C={};v(C,{default:()=>p});module.exports=b(C);var u=require("obsidian");var g=require("obsidian"),a=class{constructor(t,i,s,e){this.app=t;this.runtimeState=i;this.component=s;this.getSettings=e;this.footerEl=null;this.contentEl=null;this.resizeHandle=null;this.isResizing=!1;this.startY=0;this.startHeight=0;this.isUpdating=!1}show(){this.footerEl||(this.createFooterContainer(),this.createResizeHandle(),this.createContentArea(),this.setupResizeHandlers(),document.body.appendChild(this.footerEl),this.updateContent(),document.body.addClass("custom-footer-visible"))}hide(){this.footerEl&&(this.footerEl.remove(),this.footerEl=null,this.contentEl=null,this.resizeHandle=null),this.isUpdating=!1,document.body.removeClass("custom-footer-visible")}async updateContent(){if(!(!this.contentEl||this.isUpdating)){this.isUpdating=!0;try{this.contentEl.innerHTML="",this.contentEl.empty();let t=this.getContentForCurrentFile();if(!t){this.contentEl.createEl("div",{text:"No content configured for this directory",cls:"custom-footer-no-content"});return}await this.renderContent(t,this.contentEl)}catch(t){console.error("Failed to update footer content:",t),this.contentEl.innerHTML="",this.contentEl.empty(),this.contentEl.createEl("div",{text:"Error loading footer content",cls:"custom-footer-error"})}finally{this.isUpdating=!1}}}getContentForCurrentFile(){let t=this.app.workspace.getActiveFile();if(!t)return null;let i=this.getSettings(),s=t.path,e=null;for(let o of i.directoryMappings){if(o.directoryPath==="*"){e=o.content;continue}if(this.doesPathMatch(s,o.directoryPath))return o.content||null}return e}doesPathMatch(t,i){if(!i)return!1;let s=i.endsWith("/")?i:`${i}/`;return t.startsWith(s)}createFooterContainer(){this.footerEl=document.createElement("div"),this.footerEl.addClass("custom-footer-container"),Object.assign(this.footerEl.style,{height:`${this.runtimeState.currentHeight}px`,backgroundColor:"var(--background-primary)",position:"fixed",bottom:"0",left:"0",right:"0",zIndex:"50",overflow:"hidden",boxShadow:"0 -2px 8px rgba(0, 0, 0, 0.1)",pointerEvents:"auto"})}createResizeHandle(){this.resizeHandle=document.createElement("div"),this.resizeHandle.addClass("custom-footer-resize-handle"),Object.assign(this.resizeHandle.style,{position:"absolute",top:"0",left:"0",right:"0",height:"6px",backgroundColor:"var(--background-modifier-border)",cursor:"ns-resize",zIndex:"60",transition:"background-color 0.2s ease"}),this.resizeHandle.addEventListener("mouseenter",()=>{this.resizeHandle.style.backgroundColor="var(--interactive-accent)"}),this.resizeHandle.addEventListener("mouseleave",()=>{this.isResizing||(this.resizeHandle.style.backgroundColor="var(--background-modifier-border)")}),this.footerEl.appendChild(this.resizeHandle)}createContentArea(){this.contentEl=document.createElement("div"),this.contentEl.addClass("custom-footer-content"),Object.assign(this.contentEl.style,{padding:"12px",height:`${this.runtimeState.currentHeight-6}px`,overflow:"auto",marginTop:"6px",pointerEvents:"auto",position:"relative"}),this.footerEl.appendChild(this.contentEl)}setupResizeHandlers(){if(!this.resizeHandle)return;let t=e=>{e.preventDefault(),this.isResizing=!0,this.startY=e.clientY,this.startHeight=this.runtimeState.currentHeight,document.body.style.cursor="ns-resize",document.body.style.userSelect="none",this.resizeHandle.style.backgroundColor="var(--interactive-accent)"},i=e=>{if(!this.isResizing)return;e.preventDefault();let o=this.startY-e.clientY,c=Math.max(100,this.startHeight+o);this.runtimeState.currentHeight=c,this.footerEl&&this.contentEl&&(this.footerEl.style.height=`${c}px`,this.contentEl.style.height=`${c-6}px`)},s=()=>{this.isResizing&&(this.isResizing=!1,document.body.style.cursor="",document.body.style.userSelect="",this.resizeHandle.style.backgroundColor="var(--background-modifier-border)")};this.resizeHandle.addEventListener("mousedown",t),this.component.registerDomEvent(document,"mousemove",i),this.component.registerDomEvent(document,"mouseup",s)}async renderContent(t,i){let s=document.createElement("div"),e=this.app.workspace.getActiveFile(),o=(e==null?void 0:e.path)||"";for(await g.MarkdownRenderer.render(this.app,t,s,o,this.component);s.firstChild;)i.appendChild(s.firstChild)}};var r=require("obsidian"),l=class extends r.PluginSettingTab{constructor(t,i){super(t,i),this.plugin=i}display(){let{containerEl:t}=this;t.empty(),t.createEl("h2",{text:"Custom Footer Settings"}),new r.Setting(t).setName("Default Footer Visibility").setDesc("Whether the footer should be visible when Obsidian starts. You can toggle visibility using the command palette.").addToggle(s=>s.setValue(this.plugin.settings.defaultFooterVisible).onChange(async e=>{this.plugin.settings.defaultFooterVisible=e,await this.plugin.saveSettings()})),new r.Setting(t).setName("Default Footer Height").setDesc("The default height of the footer in pixels when it's first shown.").addSlider(s=>s.setLimits(100,800,10).setValue(this.plugin.settings.defaultFooterHeight).setDynamicTooltip().onChange(async e=>{this.plugin.settings.defaultFooterHeight=e,await this.plugin.saveSettings()})).addExtraButton(s=>s.setIcon("reset").setTooltip("Reset to default (420px)").onClick(async()=>{this.plugin.settings.defaultFooterHeight=420,await this.plugin.saveSettings(),this.display()})),this.displayDirectoryMappings(t),t.createEl("h3",{text:"Usage"});let i=t.createEl("div",{cls:"setting-item-description"});i.innerHTML=`
			<p><strong>Toggle Footer:</strong> Use the command "Show Custom Footer" to toggle the footer visibility.</p>
			<p><strong>Resize Footer:</strong> Drag the top edge of the footer to resize it. The size will be remembered during the current session.</p>
			<p><strong>Settings:</strong> Changes here affect the default state when Obsidian starts, not the current session.</p>
		`}displayDirectoryMappings(t){t.createEl("h3",{text:"Directory Mappings"});let i=t.createEl("div",{cls:"setting-item-description"});i.innerHTML=`
			<p><strong>Directory Mappings:</strong> Configure what content to display for different directory paths.</p>
			<p>Use "*" as the directory path for a default fallback. More specific paths take priority.</p>
		`;for(let s of this.plugin.settings.directoryMappings)this.createMappingRow(t,s);new r.Setting(t).setName("Add Directory Mapping").setDesc("Add a new directory to content mapping").addButton(s=>s.setButtonText("Add Mapping").setCta().onClick(async()=>{let e={id:Date.now().toString(),directoryPath:"",content:""};this.plugin.settings.directoryMappings.push(e),await this.plugin.saveSettings(),this.display()}))}createMappingRow(t,i){let s=t.createEl("div",{cls:"directory-mapping-row"});new r.Setting(s).setName("Directory Path").setDesc("Path to match (e.g., 'Goals', 'Projects', or '*' for default)").addText(e=>e.setPlaceholder("Goals").setValue(i.directoryPath).onChange(async o=>{i.directoryPath=o.trim(),await this.plugin.saveSettings()})).addExtraButton(e=>e.setIcon("trash").setTooltip("Remove this mapping").onClick(async()=>{let o=this.plugin.settings.directoryMappings.indexOf(i);o>-1&&(this.plugin.settings.directoryMappings.splice(o,1),await this.plugin.saveSettings(),this.display())})),new r.Setting(s).setName("Content to Render").setDesc("Markdown content to display for this directory (supports embeds, links, etc.)").addTextArea(e=>{e.setPlaceholder("![[Templates/Links]]").setValue(i.content).onChange(async o=>{i.content=o,await this.plugin.saveSettings()}),e.inputEl.style.width="100%",e.inputEl.style.minWidth="400px",e.inputEl.style.height="120px",e.inputEl.style.resize="vertical",e.inputEl.style.fontFamily="var(--font-monospace)"}),s.createEl("hr",{cls:"directory-mapping-separator"})}};var d={defaultFooterVisible:!1,defaultFooterHeight:420,directoryMappings:[]};var p=class extends u.Plugin{async onload(){await this.loadSettings(),this.runtimeState={isVisible:this.settings.defaultFooterVisible,currentHeight:this.settings.defaultFooterHeight},this.footerManager=new a(this.app,this.runtimeState,this,()=>this.settings),this.addSettingTab(new l(this.app,this)),this.addCommand({id:"toggle-custom-footer",name:"Toggle Custom Footer",callback:()=>{this.toggleFooter()}}),this.registerEvent(this.app.workspace.on("active-leaf-change",()=>{this.runtimeState.isVisible&&this.footerManager.updateContent()})),this.runtimeState.isVisible&&this.footerManager.show()}async onunload(){var t;(t=this.footerManager)==null||t.hide()}async loadSettings(){this.settings=Object.assign({},d,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}toggleFooter(){this.runtimeState.isVisible=!this.runtimeState.isVisible,this.runtimeState.isVisible?this.footerManager.show():this.footerManager.hide()}};
